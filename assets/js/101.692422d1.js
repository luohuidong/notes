(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{321:function(s,a,e){"use strict";e.r(a);var t=e(0),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"ssh-免密登陆"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssh-免密登陆","aria-hidden":"true"}},[s._v("#")]),s._v(" SSH 免密登陆")]),s._v(" "),e("p",[s._v("环境：")]),s._v(" "),e("ul",[e("li",[s._v("客户端：Ubuntu 18.04")]),s._v(" "),e("li",[s._v("服务器端：CentOS 7")])]),s._v(" "),e("h2",{attrs:{id:"客户端生成-ssh-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#客户端生成-ssh-key","aria-hidden":"true"}},[s._v("#")]),s._v(" 客户端生成 ssh key")]),s._v(" "),e("p",[s._v("在 "),e("code",[s._v("~/.ssh")]),s._v(" 路径下，运行下面的其中一条命令，可生成一对公钥和私钥")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("ssh-keygen\nssh-keygen -t rsa\nssh-keygen -t dsa\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("rsa 和 dsa 分别代表不同的加密方式。")]),s._v(" "),e("h2",{attrs:{id:"开启-ssh-代理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开启-ssh-代理","aria-hidden":"true"}},[s._v("#")]),s._v(" 开启 SSH 代理")]),s._v(" "),e("p",[s._v("当生成了公私钥之后，需要通过下面的命令打开 SSH 代理，否则可能会出现 "),e("a",{attrs:{href:"https://stackoverflow.com/questions/17846529/could-not-open-a-connection-to-your-authentication-agent",target:"_blank",rel:"noopener noreferrer"}},[s._v("Could not open a connection to your authentication agent"),e("OutboundLink")],1),s._v(" 的情况。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("eval")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("ssh-agent -s"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("随后，执行 "),e("code",[s._v("ssh-add ~/.ssh/xxx")]),s._v("，将"),e("strong",[s._v("客户端")]),s._v("私钥加载到 ssh 服务中，xxx 替换为具体的私钥文件名")]),s._v(" "),e("h2",{attrs:{id:"服务器端-authorized-keys-文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务器端-authorized-keys-文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 服务器端 authorized_keys 文件")]),s._v(" "),e("p",[s._v("如果想要实现 SSH 免密登陆，需要进行如下几个步骤")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("将客户端生成的公钥，粘贴到"),e("strong",[s._v("服务器端")]),s._v(" "),e("code",[s._v("~/.ssh/authorized_keys")]),s._v(" 文件中。")])]),s._v(" "),e("li",[e("p",[s._v("通过 "),e("code",[s._v("chmod 600")]),s._v(" 修改 authorized_keys 文件的权限。")])]),s._v(" "),e("li",[e("p",[s._v("执行 "),e("code",[s._v("sudo service ssh restart")]),s._v(" 命令重启 ssh。")])])]),s._v(" "),e("h2",{attrs:{id:"使用-ssh-config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-ssh-config","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用 SSH config")]),s._v(" "),e("p",[s._v("ssh config 能让我们批量管理多个 ssh，通过别名登陆远程服务器。config 文件存放在 "),e("code",[s._v("~/.ssh/config")]),s._v("。")]),s._v(" "),e("h3",{attrs:{id:"config-语法关键字"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#config-语法关键字","aria-hidden":"true"}},[s._v("#")]),s._v(" config 语法关键字")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("Host：主机别名")])]),s._v(" "),e("li",[e("p",[s._v("HostName：主机名")])]),s._v(" "),e("li",[e("p",[s._v("Port：端口号（默认端口为 22）")])]),s._v(" "),e("li",[e("p",[s._v("User：用户名")])]),s._v(" "),e("li",[e("p",[s._v("IdentityFile：密钥文件的路径")])])]),s._v(" "),e("h3",{attrs:{id:"新建-config-文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建-config-文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 新建 config 文件")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("host testhost\n  HostName 192.168.30.250\n  Port 22\n  User root\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("当配置文件编辑完毕之后，如果已经设置好 SSH 免密登陆，那么此时运行 "),e("code",[s._v("ssh testhost")]),s._v(" 即可登陆远程的服务器。")])])}),[],!1,null,null,null);a.default=r.exports}}]);